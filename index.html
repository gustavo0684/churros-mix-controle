<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Churros Mix Controle</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2b1b14">

<style>
body{margin:0;font-family:Arial;background:#f4f1ec}
header{background:#2b1b14;color:#fff;padding:12px;text-align:center;font-size:18px}
main{max-width:500px;margin:auto;padding:15px}
.card{background:#fff;border-radius:10px;padding:15px;margin-bottom:15px;box-shadow:0 2px 6px rgba(0,0,0,.1)}
button,input{width:100%;padding:12px;margin-top:10px;font-size:16px;border-radius:8px;border:none}
button{background:#2b1b14;color:#fff;font-weight:bold}
input{border:1px solid #ccc}
.total{font-size:22px;font-weight:bold;text-align:center}
</style>
</head>

<body>
<header>üç© Churros Mix Controle</header>

<main>
  <div class="card">
    <h3>Pre√ßo do Churros (R$)</h3>
    <input type="number" step="0.01" id="preco">
    <button onclick="salvarPreco()">Salvar pre√ßo</button>
  </div>

  <div class="card">
    <h3>Vendas do Dia</h3>
    <button onclick="vender()">+1 Churros</button>
    <p class="total">Quantidade: <span id="qtd">0</span></p>
    <p class="total">Total: R$ <span id="total">0,00</span></p>
  </div>

  <div class="card">
    <button onclick="fecharDia()">Fechar Dia</button>
  </div>
</main>

<script>
let qtd = Number(localStorage.getItem("qtd")) || 0;
let preco = Number(localStorage.getItem("preco")) || 8;

function atualizar(){
  document.getElementById("qtd").innerText = qtd;
  document.getElementById("total").innerText = (qtd * preco).toFixed(2);
}

function vender(){
  qtd++;
  localStorage.setItem("qtd", qtd);
  atualizar();
}

function salvarPreco(){
  preco = Number(document.getElementById("preco").value);
  localStorage.setItem("preco", preco);
  atualizar();
}

function fecharDia(){
  const valor = (qtd * preco).toFixed(2);
  const msg = `üìä Fechamento do Dia\nüç© Churros vendidos: ${qtd}\nüí∞ Total: R$ ${valor}`;
  window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, "_blank");
  qtd = 0;
  localStorage.setItem("qtd", 0);
  atualizar();
}

document.getElementById("preco").value = preco;
atualizar();

if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js");
}
</script>
</body>
</html>
